<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSocket Proxy Client</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    input, button, textarea { margin: 0.5rem 0; width: 100%; }
    textarea { height: 200px; }
  </style>
</head>
<body>
  <h1>WebSocket Client</h1>
  <label>Server IP (e.g., ws://localhost:12345):</label>
  <input id="wsUrl" value="ws://localhost:12345" />

  <button onclick="connect()">Connect</button>
  <button onclick="disconnect()">Disconnect</button>

  <hr>
  <label>Send Data:</label>
  <input id="message" placeholder="Type your message..." />
  <button onclick="send()">Send</button>

  <hr>
  <label>Server Response:</label>
  <textarea id="log" readonly></textarea>

  <script>
    let socket = null;
    const logArea = document.getElementById('log');

    function log(msg) {
      logArea.value += msg + '\n';
      logArea.scrollTop = logArea.scrollHeight;
    }

    function connect() {
      const wsUrl = document.getElementById('wsUrl').value;
      socket = new WebSocket(wsUrl);

      socket.onopen = () => log("✅ Connected to server");
      socket.onmessage = (e) => log("📥 " + e.data);
      socket.onerror = (e) => log("❌ Error: " + e.message);
      socket.onclose = () => log("🔌 Disconnected");
    }

    function send() {
      const msg = document.getElementById('message').value;
      if (socket && socket.readyState === WebSocket.OPEN) {
        socket.send(msg);
        log("📤 Sent: " + msg);
      } else {
        log("❗ Not connected to server");
      }
    }

    function disconnect() {
      if (socket) {
        socket.close();
        socket = null;
      }
    }
  </script>
</body>
</html>
